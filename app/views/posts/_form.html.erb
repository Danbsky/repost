<div class="container container-sm my-3">
  <%= render 'shared/errors', object: @form %>

  <%= form_with model: @form, url: polymorphic_path(@form.post), local: true, data: { controller: 'preview--content' } do |f| %>
    <div class="form-group">
      <%= f.label :posted_on %>
      <%= f.date_field :posted_on, required: true, class: 'form-control' %>
    </div>

    <ul class="nav nav-tabs mb-2">
      <li class="nav-item"><a href="#write" data-toggle="tab" class="nav-link active">Write</a></li>
      <li class="nav-item"><a href="#preview" data-toggle="tab" class="nav-link">Preview</a></li>
    </ul>

    <div class="tab-content">
      <div id="write" class="tab-pane active">
        <div class="form-group">
          <%= f.label :content %> <%= required_mark %>
          <%= f.text_area :content,
                rows: 16,
                required: true,
                class: 'form-control',
                'data-controller': 'autocomplete--content',
                'data-action': 'input->preview--content#input',
                'data-target': 'autocomplete--content.textarea preview--content.textarea',
                'data-autocomplete--content-tag-names': autocomplete_tag_names.to_s,
                'data-autocomplete--content-user-screen-names': autocomplete_user_screen_names.to_s %>
          <%= render 'shared/markdown_help' %>
        </div>
      </div>

      <div id="preview" class="tab-pane">
        <div data-target="preview--content.body" class="content mt-3">
        </div>
      </div>
    </div>

    <div class="form-group">
      <%= f.label :tag_names %>
      <%= render 'tags/form', tag_names: @form.tag_names, name: 'post_form[tag_names][]' %>
      <p class="form-text small text-muted">
        Tag name may only contain alphanumeric characters or underscores.
      </p>
    </div>

    <%= f.submit class: 'btn btn-success' %>
  <% end %>
</div>
